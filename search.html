<!DOCTYPE html>
<html>

	<head>
		<title>Jones DVD Search</title>
		<link rel="stylesheet" type="text/css" href="resources/css/bootstrap-custom.css" />
		
		<script type="text/javascript" src="libraries/jquery/js/jquery-1.11.0.js"></script>
		<script type="text/javascript" src="resources/js/DisplaySearch.js"></script>

		<!-- Javascript that makes a axaj call to search.php and then takes that information and displays it on this page -->
		<script type="text/javascript">
		
			$(document).ready(function(){

				$('#header').load('header.html', function(){
					$('.search-field').attr("value", search);
				});
				$('#loading').hide();
				$('.last-updated').hide();
				$('#searchResultsWrapper').hide();

				var get_results = window.location.search.substring(1);
				var search_term = get_results.split("=");
				var search = search_term[1].split("+").join(" ");

				$('#searchTerm > i').html(search);


				$.get( "resources/php/search.php", { search: search_term[1] }, function(response) {
						displaySearchResults(response);
					}, "json")
					  .fail(function(data) {
					    alert( "error" );
						console.log(data);
					});
	
			});

			$(document).ajaxStart(function(){
				$('#loading').html("<img id=\"loading\" src=\"resources/images/Loader.gif\"></img>");
				$('#loading').fadeIn(1000);
			});

			$(document).ajaxStop(function(){
				$('#loading').fadeOut(700, function(){
					$('#searchResultsWrapper').fadeIn(700);
				});
			});

		</script>
	</head>

	<body>

		<div id="header"></div>

		<div class="container">
			<h3 id="displaySearchTerm">
				Search results for:&nbsp;<span id="searchTerm"><i></i></span>
			</h3>

			<!-- Loading Image. Only shown when axaj call has been made and hasn't returned. -->
			<div id="loading"></div>

			<!-- Where search results will be displayed -->
			<div id="searchResultsWrapper">
				<div id="searchResults">
					<!-- Need some kind of loading message -->
				</div>
			</div>
		</div>
		

	</body>

</html>
