<!DOCTYPE html>
<html>

	<head>
		<title>Jones DVD Search</title>
		<link rel="stylesheet" type="text/css" href="css/bootstrap-custom.css" />
		
		<script type="text/javascript" src="js/jquery-1.11.0.js"></script>
		<script type="text/javascript" src="js/DisplaySearch.js"></script>

		<!-- Javascript that makes a axaj call to search.php and then takes that information and displays it on this page -->
		<script type="text/javascript">
			$(document).ready(function(){

				$('#loading').hide();
				$('.last-updated').hide();
				$('#searchResultsWrapper').hide();

				var get_results = window.location.search.substring(1);
				var search_term = get_results.split("=");
				var search = search_term[1].split("+").join(" ");

				$('#searchTerm > i').html(search);
				$('.search-field').attr("value", search);


				$.get( "php/search.php", { search: search_term[1] }, function(response) {
						displaySearchResults(response);
					}, "json")
					  .fail(function(data) {
					    alert( "error" );
						console.log(data);
					});
					  


				// $.get("php/search.php", { search: search_term[1] }, 
				// 	function(response){
				// 		console.log("in annonymous function...");
				// 		//displaySearchResults(response);
				// 	}, "json");
	
			});

			$(document).ajaxStart(function(){
				$('#loading').html("<img id=\"loading\" src=\"images/Loader.gif\"></img>");
				$('#loading').fadeIn(1000);
			});

			$(document).ajaxStop(function(){
				$('#loading').fadeOut(700, function(){
					$('#searchResultsWrapper').fadeIn(700);
				});
			});

		</script>
	</head>

	<body>

		<div id="header"/>
		
		<nav class="navbar navbar-default navbar-fixed-top">
			<div class="container-fluid">
				
				<!-- Jones Media Center Logo -->
				<div class="navbar-header">
					<a class="navbar-brand" href="index.html">
						<img alt="Brand" src="images/Jones_Logo.png">
					</a>
				</div>
				
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      				<ul class="nav navbar-nav">

						<!-- Link to home -->
						<li><a href="index.html" id="home">Home</a></li>

						<!-- Link to search by genre -->
						<li><a href="search_genre.html">Search by Genre</a></li>

						<!-- Searching by keyword -->
						<form action="search.html" class="navbar-form navbar-left" role="search" method="get">
							<div class="form-group">
								<input name="search" type="text" class="form-control search-field" placeholder="Search by Keyword">
							</div>
						
						</form>

					</ul>
					
					<!--link to f&q page -->
					<ul class="nav navbar-nav navbar-right">
						<li><a class="questions-link" href="fandq.html">Frequently Asked<br/>Questions</a></li>
					</ul>

					
				</div>
			</div>
		</nav>

		<div class="container">
			<h3 id="displaySearchTerm">
				Search results for:&nbsp;<span id="searchTerm"><i></i></span>
			</h3>

			<!-- Loading Image. Only shown when axaj call has been made and hasn't returned. -->
			<div id="loading"></div>

			<!-- Where search results will be displayed -->
			<div id="searchResultsWrapper">
				<div id="searchResults">
					<!-- Need some kind of loading message -->
				</div>
			</div>
		</div>
		

	</body>

</html>
