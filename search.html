<html>

	<head>
		<title>Jones DVD Search</title>
		<link rel="stylesheet" href="style.css" type="text/css"/>
	</head>

	<body>

		<div id="header">
			<h1>Jones Media Center</h1>

			<form action="search.html" method="get">
				Search for DVDs and VHS: <input type="text" name="search">
				<input type="submit" value="Search">
			</form>
		</div>


		Search results for: &nbsp;<span id='searchTerm'></span>

		<!-- Where search results will be displayed -->
		<div id="searchResultsWrapper">
			<div id="searchResults">
				<!-- Need some kind of loading message -->
			</div>
		</div>

		<script src='js/jquery-1.11.0.js'></script>

		<!-- Javascript that makes a axaj call to search.php and then takes that information and displays it on this page -->
		<script>
			$(document).ready(function(){
				var get_results = window.location.search.substring(1);
				var search_term = get_results.split("=");

				$('#searchTerm').html(search_term[1]);

				$.get("search_results.php?search=\"" + search_term[1] + "\"", 
					function(response){
						console.log("search_results.php returned");
						console.log(response);
					
						// Parse the JSON object that is returned
						var jsonObj = $.parseJSON(JSON.stringify(response));
						$.each(jsonObj, function(index, obj){
							console.log(obj.title);
							var movie = $('<div>', {
								'class' : 'movieResult',
								html : '<strong><h2 class=\"title\"">' + obj.title + 
										'</h2></strong> <div class=\"summary\">' + obj.summary + 
										'</div> <br /> <div class=\"cast\"><strong>Cast: </strong>' + obj.cast +
										'</div <br/>'
							});

							movie.appendTo($('#searchResults'));

						});
					},
					"json");
			});
		</script> 

	</body>

</html>